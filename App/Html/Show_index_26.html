    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="keywords" content="个人博客" />
    <meta name="description" content="个人博客" />
    <meta name="author" content="junlinhuang" />
    <meta name="copyright" content="JUNLINHUANG" />
    <link rel="shortcut icon" href="/Blog/Public/Images/logo.ico" type="image/x-icon"/>
    <title>My Blog</title>
    <link rel="stylesheet" href="/Blog/Public/Css/common.css" />
    <script type="text/JavaScript" src='/Blog/Public/Js/jquery-1.7.2.min.js'></script>
    <script type="text/JavaScript" src='/Blog/Public/Js/common.js'></script>
    <link rel="stylesheet" href="/Blog/Public/Css/show.css"/>
    </head>
<body>
<!--头部-->
<div class='top-search-wrap'>
    <div class='top-search'>
        <a href="http://www.dianzihuo.com" target='_blank' id='logo'>
                <img src="/Blog/Public/Images/logo.png"/>

        </a>
        <!-- <p style="color: white; margin-top: 20px;">我不是大牛，但总将会成为大牛!</p> -->
   
    </div>
</div>
<!--
-->
<div class='top-nav-wrap'>
    <ul class='nav-lv1'>
        <li class='nav-lv1-li'>
            <a href="/Blog" class='top-cate'>博客首页</a>
        </li>

        <li class='nav-lv1-li'>
                <a href="/Blog/c_1.html" class='top-cate'>HTML</a>
                <ul>
                        <li><a href="/Blog/c_4.html">CSS</a></li>                    </ul>            </li><li class='nav-lv1-li'>
                <a href="/Blog/c_3.html" class='top-cate'>PHP</a>
                <ul>
                                            </ul>            </li><li class='nav-lv1-li'>
                <a href="/Blog/c_2.html" class='top-cate'>JAVA</a>
                <ul>
                        <li><a href="/Blog/c_5.html">android</a></li>                    </ul>            </li><li class='nav-lv1-li'>
                <a href="/Blog/c_7.html" class='top-cate'>C++</a>
                <ul>
                                            </ul>            </li><li class='nav-lv1-li'>
                <a href="/Blog/c_8.html" class='top-cate'>C</a>
                <ul>
                        <li><a href="/Blog/c_9.html">Object</a></li>                    </ul>            </li><li class='nav-lv1-li'>
                <a href="/Blog/c_10.html" class='top-cate'>其他</a>
                <ul>
                        <li><a href="/Blog/c_11.html">数据库</a></li><li><a href="/Blog/c_12.html">框架</a></li>                    </ul>            </li>
        <!--<li class='nav-lv1-li'>
                <a href="" class='top-cate'>HTML</a>
                <ul>
                        <li><a href="">CSS</a></li>                    </ul>            </li><li class='nav-lv1-li'>
                <a href="" class='top-cate'>PHP</a>
                            </li><li class='nav-lv1-li'>
                <a href="" class='top-cate'>JAVA</a>
                <ul>
                        <li><a href="">android</a></li>                    </ul>            </li><li class='nav-lv1-li'>
                <a href="" class='top-cate'>C++</a>
                            </li><li class='nav-lv1-li'>
                <a href="" class='top-cate'>C</a>
                <ul>
                        <li><a href="">Object</a></li>                    </ul>            </li><li class='nav-lv1-li'>
                <a href="" class='top-cate'>其他</a>
                <ul>
                        <li><a href="">数据库</a></li><li><a href="">框架</a></li>                    </ul>            </li>-->
    </ul>
</div>
<!--主体-->
	<div class='main'>
		<div class='main-left'>
			<div class='location'>
				<a href="">首页</a>>
								<a href="/Blog/c_2.html">JAVA</a>			</div>
			<div class="title">
				<p>JAVA性能</p>
				<div>
					<span class='fl'>发布于：2014年03月12日</span>
					<span class='fr'>已被阅读<script type="text/javascript" src="/Blog/Index/Show/clickNum/id/26.html"></script>次</span>
				</div>
			</div>
			<div class='content'>
				<p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">Java<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">编程中</span><span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">“</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">为了性能</span><span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">”</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量要做到的一些地方</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;">&nbsp;</p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">1.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量在合适</span></span><a href="http://www.javamm.com/" shape="rect" target="_blank" data-mce-href="http://www.javamm.com/" style="margin: 0px; padding: 0px; border: 0px; line-height: 1.428571em; color: rgb(4, 122, 198);"><span style="line-height: 1.428571em;">的</span></a><span style="line-height: 1.428571em;">场合使用单例</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">使用单例可以减轻加载的负担，缩短加载的时间，提高加载的效率，但并不是所有地方都适用于单例，简单来说，单例主要适用于以下三个方面：</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">第一，控制资源的使用，通过线程同步来控制资源的并发访问；</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">第二，控制实例的产生，以达到节约资源的目的；</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">第三，控制数据共享，在不建立直接关联的条件下，让多个不相关的进程或线程之间实现通信。</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">2.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量避免随意使用静态变量</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">要知道，当某个对象被定义为<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">stataic</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">变量所引用，那么</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">gc</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">通常是不会回收这个对象所占有的内存，如</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">1&nbsp;public&nbsp;class&nbsp;A{</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">2&nbsp;static&nbsp;B&nbsp;b&nbsp;=&nbsp;new&nbsp;B();</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">3&nbsp;}</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">此时静态变量<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">b</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的生命周期与</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">A</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">类同步，如果</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">A</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">类不会卸载，那么</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">b</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">对象会常驻内存，直到程序终止。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">3.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量避免过多过常的创建</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Java</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">对象</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">尽量避免在经常调用的方法，循环中<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">new</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">对象，由于系统不仅要花费时间来创建对象，而且还要花时间对这些对象进行垃圾回收和处理，在我们可以控制的范围内，最大限度的重用对象，最好能用基本的数据类型或数组来替代对象。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">4.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量使用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">final</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">修饰符</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">带有<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">final</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">修饰符的类是不可派生的。在</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Java</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">核心</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">API</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">中，有许多应用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">final</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的例子，例如</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">java.lang.String</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">。为</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">String</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">类指定</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">final</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">防止了使用者覆盖</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">length()</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">方法。另外，如果一个类是</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">final</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的，则该类所有方法都是</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">final</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的。</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Java</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">编译器会寻找机会内联（</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">inline</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">）所有的</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">final</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">方法（这和具体的编译器实现有关）。此举能够使性能平均提高</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">50%</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">5.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量使用局部变量</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">调用方法时传递的参数以及在调用中创建的临时变量都保存在栈（<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Stack</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">）中，速度较快。其他变量，如静态变量、实例变量等，都在堆（</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Heap</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">）中创建，速度较慢。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">6.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量处理好包装类型和基本类型两者的使用场所</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">虽然包装类型和基本类型在使用过程中是可以相互转换，但它们两者所产生的内存区域是完全不同的，基本类型数据产生和处理都在栈中处理，包装类型是对象，是在堆中产生实例。</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">在集合类对象，有对象方面需要的处理适用包装类型，其他的处理提倡使用基本类型。</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">7.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">慎用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">synchronized</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，尽量减小</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">synchronize</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的方法</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">都知道，实现同步是要很大的系统开销作为代价的，甚至可能造成死锁，所以尽量避免无谓的同步控制。<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">synchronize</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">方法被调用时，直接会把当前对象锁&nbsp;了，在方法执行完之前其他线程无法调用当前对象的其他方法。所以</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">synchronize</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的方法尽量小，并且应尽量使用方法同步代替代码块同步。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">8.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量使用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">StringBuilder</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">和</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">StringBuffer</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">进行字符串连接</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">这个就不多讲了。</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">9.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量不要使用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">finalize</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">方法</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">实际上，将资源清理放在<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">finalize</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">方法中完成是非常不好的选择，由于</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">GC</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的工作量很大，尤其是回收</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Young</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">代内存时，大都会引起应用程序暂停，所以再选择使用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">finalize</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">方法进行资源清理，会导致</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">GC</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">负担更大，程序运行效率更差。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">10.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量使用基本数据类型代替对象</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">String&nbsp;str&nbsp;=&nbsp;<span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">“</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">hello</span><span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">”</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">;</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">上面这种方式会创建一个<span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">“</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">hello</span><span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">”</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">字符串，而且</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">JVM</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的字符缓存池还会缓存这个字符串；</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">String&nbsp;str&nbsp;=&nbsp;new&nbsp;String(<span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">“</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">hello</span><span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">”</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">);</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">此时程序除创建字符串外，<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">str</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">所引用的</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">String</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">对象底层还包含一个</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">char[]</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">数组，这个</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">char[]</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">数组依次存放了</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">h,e,l,l,o</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">11.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">单线程应尽量使用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">HashMap</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">、</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">ArrayList</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">HashTable<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">、</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Vector</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">等使用了同步机制，降低了性能。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">12.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量合理的创建</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">HashMap</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">当你要创建一个比较大的<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">hashMap</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">时，充分利用另一个构造函数</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">public&nbsp;HashMap(int&nbsp;initialCapacity,&nbsp;float&nbsp;loadFactor)</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">避免<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">HashMap</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">多次进行了</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">hash</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">重构</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">,</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">扩容是一件很耗费性能的事，在默认中</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">initialCapacity</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">只有</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">16</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，而</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">loadFactor</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">是&nbsp;</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">0.75</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，需要多大的容量，你最好能准确的估计你所需要的最佳大小，同样的</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Hashtable</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Vectors</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">也是一样的道理。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">13.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量减少对变量的重复计算</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">如</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">for(int&nbsp;i=0;i&nbsp;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">应该改为</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">for(int&nbsp;i=0,len=list.size();i</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">&nbsp;并且在循环中应该避免使用复杂的表达式，在循环中，循环条件会被反复计算，如果不使用复杂表达式，而使循环条件值不变的话，程序将会运行的更快。</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">14.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量避免不必要的创建</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">如</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">A&nbsp;a&nbsp;=&nbsp;new&nbsp;A();</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">if(i==1){list.add(a);}</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">应该改为</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">if(i==1){</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">A&nbsp;a&nbsp;=&nbsp;new&nbsp;A();</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">list.add(a);}</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">15.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量在</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">finally</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">块中释放资源</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">程序中使用到的资源应当被释放，以避免资源泄漏。这最好在<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">finally</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">块中去做。不管程序执行的结果如何，</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">finally</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">块总是会执行的，以确保资源的正确关闭。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">16.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量使用移位来代替</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">&#39;a/b&#39;</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的操作</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">&quot;/&quot;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">是一个代价很高的操作，使用移位的操作将会更快和更有效</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">如</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">int&nbsp;num&nbsp;=&nbsp;a&nbsp;/&nbsp;4;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">int&nbsp;num&nbsp;=&nbsp;a&nbsp;/&nbsp;8;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">应该改为</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">int&nbsp;num&nbsp;=&nbsp;a&nbsp;&gt;&gt;&nbsp;2;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">int&nbsp;num&nbsp;=&nbsp;a&nbsp;&gt;&gt;&nbsp;3;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">但注意的是使用移位应添加注释，因为移位操作不直观，比较难理解</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">17.<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量使用移位来代替</span><span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">’</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">a*b</span><span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">’</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的操作</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">同样的，对于<span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">’</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">*&#39;</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">操作，使用移位的操作将会更快和更有效</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">如</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">int&nbsp;num&nbsp;=&nbsp;a&nbsp;*&nbsp;4;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">int&nbsp;num&nbsp;=&nbsp;a&nbsp;*&nbsp;8;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">应该改为</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">int&nbsp;num&nbsp;=&nbsp;a&nbsp;&lt;&lt;&nbsp;2;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">int&nbsp;num&nbsp;=&nbsp;a&nbsp;&lt;&lt;&nbsp;3;</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">18.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量确定</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">StringBuffer</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的容量</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">StringBuffer&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的构造器会创建一个默认大小（通常是</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">16</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">）的字符数组。在使用中，如果超出这个大小，就会重新分配内存，创建一个更大的数组，并将原先的数组复制过来，再&nbsp;丢弃旧的数组。在大多数情况下，你可以在创建&nbsp;</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">StringBuffer</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的时候指定大小，这样就避免了在容量不够的时候自动增长，以提高性能。</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">如：<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">StringBuffer&nbsp;buffer&nbsp;=&nbsp;new&nbsp;StringBuffer(1000);</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">19.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量早释放无用对象的引用</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">大部分时，方法局部引用变量所引用的对象&nbsp;会随着方法结束而变成垃圾，因此，大部分时候程序无需将局部，引用变量显式设为<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">null</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">。</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">例如：</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">1&nbsp;Public&nbsp;void&nbsp;test(){</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">2&nbsp;Object&nbsp;obj&nbsp;=&nbsp;new&nbsp;Object();</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">3&nbsp;<span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">……</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">4&nbsp;Obj=null;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">5&nbsp;}</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">上面这个就没必要了，随着方法<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">test()</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的执行完成，程序中</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">obj</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">引用变量的作用域就结束了。但是如果是改成下面：</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">1&nbsp;Public&nbsp;void&nbsp;test(){</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">2&nbsp;Object&nbsp;obj&nbsp;=&nbsp;new&nbsp;Object();</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">3&nbsp;<span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">……</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">4&nbsp;Obj=null;</span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">5&nbsp;//<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">执行耗时，耗内存操作；或调用耗时，耗内存的方法</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">6&nbsp;<span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">……</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">7&nbsp;}</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">这时候就有必要将<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">obj</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">赋值为</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">null</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，可以尽早的释放对</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Object</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">对象的引用。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">20.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量避免使用二维数组</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">二维数据占用的内存空间比一维数组多得多，大概<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">10</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">倍以上。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">21.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量避免使用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">split</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">除非是必须的，否则应该避免使用<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">split</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">split</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">由于支持正则表达式，所以效率比较低，如果是频繁的几十，几百万的调用将会耗费大量资源，如果确实需&nbsp;要频繁的调用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">split</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，可以考虑使用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">apache</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">StringUtils.split(string,char)</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，频繁</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">split</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的可以缓存结果。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">22.&nbsp;ArrayList&nbsp;&amp;&nbsp;LinkedList</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">一&nbsp;个是线性表，一个是链表，一句话，随机查询尽量使用<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">ArrayList</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">ArrayList</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">优于</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">LinkedList</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">LinkedList</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">还要移动指&nbsp;针，添加删除的操作</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">LinkedList</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">优于</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">ArrayList</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">ArrayList</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">还要移动数据，不过这是理论性分析，事实未必如此，重要的是理解好</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">2&nbsp;</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">者得数据结构，对症下药。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">23.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量使用</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">System.arraycopy&nbsp;()</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">代替通过来循环复制数组</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">System.arraycopy()&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">要比通过循环来复制数组快的多</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">24.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量缓存经常使用的对象</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">尽可能将经常使用的对象进行缓存，可以使用数组，或<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">HashMap</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">的容器来进行缓存，但这种方式可能导致系统占用过多的缓存，性能下降，推荐可以使用一些第三方的开源工具，如</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">EhCache</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Oscache</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">进行缓存，他们基本都实现了</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">FIFO/FLU</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">等缓存算法。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">25.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽量避免非常大的内存分配</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">有时候问题不是由当时的堆状态造成的，而是因为分配失败造成的。分配的内存块都必须是连续的，而随着堆越来越满，找到较大的连续块越来越困难。</span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">26.&nbsp;<span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">慎用异常</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;"><span style="line-height: 1.428571em;">当创建一个异常时，需要收集一个栈跟踪<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">(stack&nbsp;track)</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，这个栈跟踪用于描述异常是在何处创建的。构建这些栈跟踪时需要为运行时栈做一份快照，正是这一部分开销很大。当需要创建一个&nbsp;</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Exception&nbsp;</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">时，</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">JVM&nbsp;</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">不得不说：先别动，我想就您现在的样子存一份快照，所以暂时停止入栈和出栈操作。栈跟踪不只包含运行时栈中的一两个元素，而是包含这个栈中的每一个元素。</span></span><span style="line-height: 1.428571em;"><br clear="none"/></span><span style="line-height: 1.428571em;">如&nbsp;果您创建一个&nbsp;<span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">Exception&nbsp;</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">，就得付出代价。好在捕获异常开销不大，因此可以使用&nbsp;</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">try-catch&nbsp;</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">将核心内容包起来。从技术上讲，您甚至可以随意地抛出异常，而不用花费很大的代价。招致性能损失的并不是&nbsp;</span><span data-mce-style="font-family: Verdana;" style="line-height: 1.428571em; font-family: Verdana;">throw&nbsp;</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">操作</span><span data-mce-style="font-family: &#39;Times New Roman&#39;;" style="line-height: 1.428571em; font-family: &#39;Times New Roman&#39;;">——</span><span data-mce-style="font-family: 宋体;" style="line-height: 1.428571em; font-family: 宋体;">尽管在没有预先创建异常的情况下就抛出异常是有点不寻常。真正要花代价的是创建异常。幸运的是，好的编程习惯已教会我们，不应该不管三七二十一就&nbsp;抛出异常。异常是为异常的情况而设计的，使用时也应该牢记这一原则。</span></span></p><p style="margin-top: 0px; margin-bottom: 0.714285em; padding: 0px; border: 0px; line-height: 19.9999942779541px; font-family: Helvetica, Arial, &#39;Droid Sans&#39;, sans-serif; font-size: 14px; white-space: normal;">&nbsp;</p><p><br/></p>			</div>
		</div>
	    <!--主体右侧-->
<div class='main-right'>

    <dl>
    <dt>热门博文</dt>
    <dd>
            <a href="/Blog/17.html" target="_blank">你的网站怎么被黑</a>
            <span>(65535)</span>
        </dd><dd>
            <a href="/Blog/28.html" target="_blank">如何成为一名黑客</a>
            <span>(65535)</span>
        </dd><dd>
            <a href="/Blog/30.html" target="_blank">成为一个PHP专家：</a>
            <span>(5532)</span>
        </dd><dd>
            <a href="/Blog/29.html" target="_blank">程序员遇到bug时</a>
            <span>(4521)</span>
        </dd><dd>
            <a href="/Blog/25.html" target="_blank">PHP环境配置</a>
            <span>(3232)</span>
        </dd>   <!-- <dd>
        <a href="">对象的产生与生命周期</a>
        <span>(1024)</span>
    </dd>-->
</dl>
    <dl>
    <dt>最发布发</dt>
    <dd>
            <a href="/Blog/30.html">成为一个PHP专家：</a>
            <span>(5532)</span>
        </dd><dd>
            <a href="/Blog/29.html">程序员遇到bug时</a>
            <span>(4521)</span>
        </dd><dd>
            <a href="/Blog/28.html">如何成为一名黑客</a>
            <span>(65535)</span>
        </dd><dd>
            <a href="/Blog/27.html">Android设计模式</a>
            <span>(37)</span>
        </dd><dd>
            <a href="/Blog/26.html">JAVA性能</a>
            <span>(66)</span>
        </dd>   <!-- <dd>
        <a href="">对象的产生与生命周期</a>
        <span>(1024)</span>
    </dd>-->


</dl>    
</div>
	</div>
        <!--底部-->
<div class='bottom'>
    <div>This is MyBlog ! Welcome To Here. Thank You</div>
</div>
</body>
</html>